# ğŸš€ Cursor Rules - Clean Code & Best Practices
# Save this rules file in the .cursor folder in the root of the project (.cursor/rules)

## ğŸ“‹ Main Guidelines (MANDATORY)

### 1. **General Rules**
- âœ… For new server-side routes, always prefer using server actions instead of routes.
- âœ… Whenever creating an entity, always consider organizationId as a foreign key.
- âœ… Always filter data by organizationId in server-side Prisma queries.
- âœ… Whenever you need to use authenticated user data, use the useUser hook from Clerk.
- âœ… Whenever you need to use authenticated organization data, use the useOrganization hook from Clerk.
- âœ… ALWAYS create fixed texts using the useTranslations hook and in the 3 supported languages (en, es, pt-BR)
- âœ… When creating the i18n structure, pay attention to using specific keys for specific screens instead of generic names.
- âœ… Always use dialog for record deletion confirmation.
- âœ… Always use zod for data validation in forms.

### 2. **Technology Stack**
- âœ… ALWAYS use npm as package manager
- âœ… ALWAYS use the project stack which is NextJs with TypeScript
- âœ… ALWAYS use Clerk for authentication
- âœ… ALWAYS use Shadcn for components - avoid using card for forms inside dialog to prevent redundant styling
- âœ… ALWAYS use Tanstack Query to manage state coming from server-side
- âœ… ALWAYS use Zustand to manage state on client-side
- âœ… ALWAYS use Tailwind CSS for styles
- âœ… ALWAYS use Prisma for ORM   

### 3. **Single Responsibility Principle (SRP)**

- âœ… Each class/function should have ONE single responsibility
- âŒ NEVER create classes/functions that do multiple things
- ğŸ” If a function/class has more than one responsibility, refactor by dividing into multiple ones

### 4. **File Size**

- âœ… Files should NOT exceed 300 lines
- âŒ If a file exceeds 300 lines, divide into multiple files
- ğŸ“ Use folders to organize related functionalities

### 5. **Function Size**

- âœ… Functions should NOT exceed 30 lines
- âœ… Functions should NOT have more than 4 parameters
- âŒ If a function is too long, divide into smaller functions
- ğŸ”§ Use objects to group related parameters

### 6. **Dependency Injection**

- âœ… ALWAYS use dependency injection
- âŒ NEVER instantiate dependencies directly inside classes
- ğŸ¯ Pass dependencies via constructor or parameters

### 7. **Code Comments and Documentation**

- âœ… ALWAYS add short and direct description of the responsibility of each function, class and component

---
### 8. **Architecture and Code Structure Guidelines**

- âœ… ALWAYS consider the current organization to filter screen information and to create new entities


### **File Organization for NextJs Project**

```
src/
â”œâ”€â”€ components/         # Reusable React components
â”œâ”€â”€ hooks/              # Custom hooks
â”œâ”€â”€ services/           # Business logic
â”œâ”€â”€ utils/              # Utility functions
â”œâ”€â”€ types/              # Type definitions
â”œâ”€â”€ constants/          # Application constants
â”œâ”€â”€ app/dashboard/      # Pages
â”œâ”€â”€ app/api/            # NextJs routes
â””â”€â”€ features/           # Application features
```

---

## ğŸ“ Review Checklist

Before submitting code, verify:

- [ ] Does the file have less than 300 lines?
- [ ] Do functions have less than 30 lines?
- [ ] Do functions have less than 4 parameters?
- [ ] Does each class/function have a single responsibility?
- [ ] Are dependencies injected (not instantiated)?
- [ ] Are names descriptive and meaningful?
- [ ] Are there no unnecessary side effects?
- [ ] Is the code well organized and readable?
